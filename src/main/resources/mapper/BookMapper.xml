<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.zihuv.managebooks.dao.BookDao">
    <insert id="insertCategory">
        INSERT INTO book_category
        SET category_name = #{category_name};
    </insert>
    <delete id="deleteCategoryById">
        DELETE
        FROM book_category
        WHERE id = #{id};
    </delete>
    <insert id="insertBook">
        INSERT INTO book
        VALUES (null, #{book_name}, #{book_author}, #{book_publish}, #{book_category}, #{book_prize},
                #{book_introduction});
    </insert>
    <delete id="deleteBookById">
        DELETE
        FROM book
        WHERE id = #{id};
    </delete>
    <update id="updateBook">
        UPDATE book
        <set>
            <if test="book_name != null">
                book_name = #{book_name},
            </if>
            <if test="book_author != null">
                book_author = #{book_author},
            </if>
            <if test="book_publish != null">
                book_publish = #{book_publish},
            </if>
            <if test="book_category != null">
                book_category = #{book_category},
            </if>
            <if test="book_prize != null">
                book_prize= #{book_prize}
            </if>
        </set>
    </update>
    <select id="listBook" resultType="com.zihuv.managebooks.entity.Book">
        SELECT * FROM book;
    </select>

</mapper>